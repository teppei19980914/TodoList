# 設計書

## 主な機能

### タスクの追加

#### 概要

ユーザはタスクのタイトル、内容、期限日を入力して新しいタスクを追加できます。  

#### 入力項目

* タイトル：必須  
* 内容　　：任意  
* 期限日　：必須(yyyy-MM-dd形式)  

#### 処理

* 入力されたデータをもとに新しいタスクを作成し、リストに追加します。  
* タスクリストを期限日の昇順でソートします。  
* タスクをCSVファイルに保存します。  

### タスクの削除

#### 概要

ユーザは選択したタスクを削除できます。  

#### 処理

* タスクテーブルで選択された行に対応するタスクをリストから削除します。  
* 削除後、タスクリストをCSVファイルに保存します。  

### タスクの更新

#### 概要

ユーザは既存のタスクのタイトル、内容、期限日を編集できます。  

#### 処理

* タスクテーブルで選択された行に対応するタスクを更新します。  
* 更新後、タスクリストをCSVファイルに保存します。  

### タスクの完了

#### 概要

ユーザはタスクを「完了済み」に設定できます。  

#### 処理

* タスクテーブルで選択された行に対応するタスクの完了フラグをtrueに設定します。  
* 完了済みのタスクは背景色が変更されます（青色）。  

### タスクリストの最新化

#### 概要

タスクリストを並び替えます。  

#### 処理

* タスクリストを「期限日」の昇順でソートします。  

### 外部CSVファイルからの一括登録

#### 概要

外部のCSVファイルを読み込み、複数のタスクを一括登録できます。  

#### 処理

* ファイル選択ダイアログを表示し、CSVファイルを選択します。  
* ファイルの1行目（カラム名）はスキップし、2行目以降をタスクとして読み込みます。  
* 読み込んだタスクをリストに追加し、期限日の昇順でソートします。  
* タスクリストをCSVファイルに保存します。  

### タスクの保存と読み込み

#### 概要

タスクはアプリケーション終了後も保持されるよう、CSVファイルに保存されます。  

#### 保存先

「TaskManager.java > TASK_FILE」  

#### 処理

保存　　：タスクリストをCSV形式で保存します。ファイルの先頭にはカラム名が含まれます。  
読み込み：アプリケーション起動時にCSVファイルを読み込み、タスクリストを復元します。  

### タスクの優先度と期限切れ状態の自動判定

#### 概要

タスクの期限日を基準に優先度と期限切れ状態を自動的に判定します。  

#### 優先度の基準

* 期限切れ (期限日 < 今日): 高  
* 今日または明日が期限: 高  
* 7日以内が期限: 中  
* それ以外: 低  

#### 期限切れフラグ

期限日が過ぎている場合、trueに設定されます。  

## GUI構成

### メイン画面

#### 上部：タスク一覧テーブル

列：No, タイトル, 内容, 完了, 期限日, 優先度, 期限切れ, 登録日, 更新日  
完了済みタスクは青色、未完了タスクは黄色で表示  

#### 下部：入力フォームと操作ボタン

入力フォーム：タイトル、内容、期限日  
操作ボタン：追加、削除、更新、完了、最新化、一括登録  

## データ構造

### フィールド

* title (String)：タスクのタイトル  
* description (String)：タスクの内容  
* dueDate (LocalDate)：タスクの期限日  
* createdDate (LocalDate)：タスクの登録日  
* updatedDate (LocalDate)：タスクの更新日  
* isDone (boolean)：タスクの完了状態  
* priority (String)：タスクの優先度（高・中・低）  
* isOverdue (boolean)：タスクの期限切れ状態  

### メソッド

* updatePriorityAndOverdue()：優先度と期限切れ状態を更新  
* toCSV()：タスクをCSV形式に変換  
* fromCSV(String csvLine)：CSV行からタスクを生成  

## ファイル構造

### 保存ファイル

TaskManager.java > TASK_FILE  

#### カラム名

タイトル, 内容, 完了, 期限日, 登録日, 更新日, 優先度, 期限切れ  

#### データ形式

CSV形式  

## 使用技術

* プログラミング言語: Java  
* GUIライブラリ: Swing  
* データ保存形式: CSV  
* 日付操作: java.time.LocalDate  
