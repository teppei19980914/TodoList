# 設計書

## はじめに

このアプリケーションは、[Java Swing](https://docs.oracle.com/javase/jp/8/docs/api/javax/swing/package-summary.html) を使用してGUIを構築しています。  

## 内容

### 動作環境の制約

* Java バージョン  
    → Java 8以上が必要です。  
* OS  
    → Windows環境での動作は確認済みですが、理論上macOSやLinux環境でも動作可能です。  

### デフォルト設定

* 保存先  
    データストア用ファイル　　：tasks.csv  
    ファイル保存用ディレクトリ：./Data  
* カラム構成：タイトル, 内容, 完了, 期限日, 登録日, 更新日, 優先度, 期限切れ  

### データストア用ファイルの制約

* CSVファイルの1行目はカラム名である必要があります。  
* 2行目以降はタスクデータとして読み込まれます。  
* フィールド数が8つでない場合、エラーが発生します。  

### 入力データの制約

* 必須項目  
    * タイトル  
        → 空白は許可されません。入力が無い場合、エラーメッセージが表示されます。  
    * 期限日  
        → 「yyyy-MM-dd」形式で入力する必要があります。形式が異なる場合、エラーメッセージが表示されます。  
* 任意項目  
    * 内容  
        → 空白でも問題ありません。  

### タスクの制約

* タスクの状態  
    * 完了  
        → タスクは「完了済み」または「未完了」のいずれかの状態を持ちます。  
        → 完了済みのタスクは青色で表示されます。  
    * 期限切れ  
        → 期限日が現在の日付より前の場合、期限切れフラグが true に設定されます。  
* 優先度  
    → 期限切れ：高  
    → 今日または明日が期限：高  
    → 7日以内が期限：中  
    → それ以外：低  

### GUIの制約

* テーブルの表示  
    → タスク一覧は JTable で表示されます。  
    → 列構成：No, タイトル, 内容, 完了, 期限日, 優先度, 期限切れ, 登録日, 更新日  
    → テーブルの行数はタスクリストのサイズに依存します。  
* 入力フォーム  
    → 入力フォームは以下の3つのフィールドで構成されます。  
        * タイトル  
        * 内容  
        * 期限日  

### エラーハンドリングの制約

* 入力エラー  
    → 下記どちらかの場合、エラーメッセージが表示されます。  
        * 必須項目が入力されていない場合  
        * 期限日の形式が不正な場合  
* ファイルエラー
    → CSVファイル内の不正なデータはスキップされ、エラーメッセージが表示されます。  
    → 下記どちらからの場合、エラーメッセージが表示されます。  
        * ファイルが存在しない場合  
        * 読み取り権限が無い場合  

### そのほかの制約

* 日付の扱い  
    → 日付は [java.time.LocalDate](https://docs.oracle.com/javase/jp/8/docs/api/java/time/LocalDate.html) を使用して管理されています。  
    → システムの日付設定に依存するため、システム日付を正しく設定してください。  
* データの永続性  
    → タスクデータはアプリケーション終了時にCSVファイルに保存されます。  
    → アプリケーション起動時にCSVファイルが読み込まれます。  

### そのほかの制約

* json形式のサポート  
    → json形式でのタスク保存・読み込みは未実装です。  
    → 関数は定義されていますが、使用されていません。  

### 今後の改善点

* CSVファイルのカラム数やデータ形式の柔軟性を向上: カラム数が異なる場合でもエラーを回避する仕組みを追加。
* フィルタリング: 完了済みタスクや期限切れタスクのみを表示する機能を追加。
* 検索機能: タイトルや期限日でタスクを検索できる機能を追加。
* 通知機能: 期限が近いタスクを通知する機能を追加。
* タスク数が多い場合のパフォーマンス改善: メモリ使用量を削減するための最適化。
* JSON形式の完全サポート: JSON形式での保存・読み込み機能を実装。
* クラウド同期: タスクデータをクラウドに保存し、複数デバイスで同期可能にする。
